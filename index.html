<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProEƒüitim - Bulut Senkronizasyonlu Eƒüitim Sistemi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/lucide-static@0.321.0/font/lucide.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #f8fafc; overflow-x: hidden; }
        .glass-card { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
        .lesson-attended { border-left: 4px solid #10b981; background: rgba(16, 185, 129, 0.1); }
        .lesson-absent { border-left: 4px solid #ef4444; background: rgba(239, 68, 68, 0.1); }
        .lesson-pending { border-left: 4px solid #f59e0b; background: rgba(245, 158, 11, 0.1); }
        
        .custom-scrollbar::-webkit-scrollbar { width: 5px; height: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.02); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        
        @media print { .no-print { display: none !important; } }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        @media (max-width: 768px) {
            .calendar-grid { grid-template-columns: 1fr; }
        }

        .sync-spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback } = React;

        // Uygulama Linki Sabiti
        const APP_URL = "https://script.google.com/macros/s/AKfycbyc-awN6OR00hqr4SuMYsTeC5vNMUeoXYMGiudUjHqbMoz2tbghSUl9aHW42_l4g-bzBA/exec";

        const BRANCHES = ["Matematik", "T√ºrk√ße", "Hayat Bilgisi", "Sosyal Bilgiler", "Fen Bilimleri", "ƒ∞ngilizce", "Bilsem", "Robotik Kodlama", "Akƒ±l ve Zeka Oyunlarƒ±"];
        const EMOTIONS_MAP = [
            { icon: "üò¢", label: "√úzg√ºn", color: "#ef4444" },
            { icon: "ü•±", label: "Yorgun", color: "#f59e0b" },
            { icon: "üòê", label: "Hazƒ±r", color: "#3b82f6" },
            { icon: "üòä", label: "Keyifli", color: "#10b981" },
            { icon: "üöÄ", label: "Enerjik", color: "#8b5cf6" }
        ];
        const GRADES = Array.from({length: 12}, (_, i) => i + 1);

        const App = () => {
            const [activeTab, setActiveTab] = useState('calendar');
            const [students, setStudents] = useState([]);
            const [lessons, setLessons] = useState([]);
            const [transactions, setTransactions] = useState([]);
            const [priceLogs, setPriceLogs] = useState([]);
            const [loading, setLoading] = useState(true);
            const [syncing, setSyncing] = useState(false);
            const [showCopyMsg, setShowCopyMsg] = useState(false);

            const fetchData = useCallback(() => {
                setLoading(true);
                if (typeof google !== 'undefined') {
                    google.script.run
                        .withSuccessHandler((data) => {
                            setStudents(data.students || []);
                            setLessons(data.lessons || []);
                            setTransactions(data.transactions || []);
                            setPriceLogs(data.priceLogs || []);
                            setLoading(false);
                        })
                        .getAppData();
                } else {
                    setLoading(false);
                }
            }, []);

            useEffect(() => {
                fetchData();
            }, [fetchData]);

            const syncWithServer = (newData) => {
                setSyncing(true);
                if (typeof google !== 'undefined') {
                    google.script.run
                        .withSuccessHandler(() => setSyncing(false))
                        .saveAppData(newData);
                }
            };

            const updateStateAndSync = (type, action, payload) => {
                let currentStudents = [...students];
                let currentLessons = [...lessons];
                let currentTransactions = [...transactions];
                let currentPriceLogs = [...priceLogs];
                
                if (type === 'students') {
                    if (action === 'save') {
                        const exists = currentStudents.find(s => s.id === payload.id);
                        currentStudents = exists ? currentStudents.map(s => s.id === payload.id ? payload : s) : [...currentStudents, payload];
                    } else if (action === 'delete') {
                        currentStudents = currentStudents.filter(s => s.id !== payload);
                    }
                    setStudents(currentStudents);
                }

                if (type === 'lessons') {
                    if (action === 'save') {
                        const exists = currentLessons.find(l => l.id === payload.id);
                        currentLessons = exists ? currentLessons.map(l => l.id === payload.id ? payload : l) : [...currentLessons, payload];
                    } else if (action === 'delete') {
                        currentLessons = currentLessons.filter(l => l.id !== payload);
                    }
                    setLessons(currentLessons);
                }

                syncWithServer({ 
                    students: currentStudents, 
                    lessons: currentLessons, 
                    transactions: currentTransactions, 
                    priceLogs: currentPriceLogs 
                });
            };

            const copyAppLink = () => {
                const el = document.createElement('textarea');
                el.value = APP_URL;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                setShowCopyMsg(true);
                setTimeout(() => setShowCopyMsg(false), 2000);
            };

            const getWeekDays = (baseDate) => {
                const date = new Date(baseDate);
                const day = date.getDay();
                const diff = date.getDate() - day + (day === 0 ? -6 : 1); 
                const monday = new Date(date.setDate(diff));
                return Array.from({length: 7}, (_, i) => {
                    const d = new Date(monday);
                    d.setDate(monday.getDate() + i);
                    return d.toISOString().split('T')[0];
                });
            };

            if (loading) {
                return (
                    <div className="h-screen w-full flex flex-col items-center justify-center bg-slate-950">
                        <div className="w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full sync-spinner mb-4"></div>
                        <p className="text-slate-400 font-bold animate-pulse uppercase tracking-widest text-[10px]">Veriler Buluttan Y√ºkleniyor...</p>
                    </div>
                );
            }

            return (
                <div className="flex flex-col md:flex-row h-screen overflow-hidden">
                    {/* Sidebar */}
                    <div className="fixed bottom-0 left-0 w-full bg-slate-900/90 backdrop-blur-md border-t border-slate-800 flex justify-around p-2 md:relative md:w-64 md:h-screen md:flex-col md:justify-start md:gap-1 md:border-r md:border-t-0 z-50 no-print">
                        <div className="hidden md:flex items-center gap-3 p-6 mb-4">
                            <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-600/20">
                                <i className="lucide-graduation-cap w-5 h-5 text-white"></i>
                            </div>
                            <span className="text-xl font-black text-white tracking-tight italic uppercase">PROEƒûƒ∞Tƒ∞M</span>
                        </div>
                        
                        <button onClick={() => setActiveTab('calendar')} className={`flex flex-col md:flex-row items-center gap-3 p-3 rounded-xl transition-all ${activeTab === 'calendar' ? 'text-blue-400 bg-blue-400/10' : 'text-slate-500 hover:text-slate-300'}`}>
                            <i className="lucide-calendar w-5 h-5"></i>
                            <span className="text-[10px] md:text-sm font-bold uppercase tracking-wide">Takvim</span>
                        </button>
                        
                        <button onClick={() => setActiveTab('students')} className={`flex flex-col md:flex-row items-center gap-3 p-3 rounded-xl transition-all ${activeTab === 'students' ? 'text-blue-400 bg-blue-400/10' : 'text-slate-500 hover:text-slate-300'}`}>
                            <i className="lucide-users w-5 h-5"></i>
                            <span className="text-[10px] md:text-sm font-bold uppercase tracking-wide">√ñƒürenciler</span>
                        </button>

                        <div className="mt-auto p-4 hidden md:block space-y-4">
                            <button onClick={copyAppLink} className="w-full flex items-center gap-2 p-3 bg-slate-800 rounded-xl text-slate-400 hover:text-white transition-all text-xs font-bold uppercase border border-slate-700">
                                <i className={`lucide-${showCopyMsg ? 'check' : 'link'} w-4 h-4 ${showCopyMsg ? 'text-green-500' : ''}`}></i>
                                {showCopyMsg ? 'Kopyalandƒ±!' : 'Linki Kopyala'}
                            </button>
                            
                            <div className="flex items-center gap-2 text-[10px] font-black text-slate-600 uppercase">
                                <div className={`w-2 h-2 rounded-full ${syncing ? 'bg-yellow-500 animate-ping' : 'bg-green-500'}`}></div>
                                {syncing ? 'E≈üitleniyor...' : 'Bulutla E≈üitlendi'}
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <main className="flex-1 overflow-y-auto bg-slate-950 pb-20 md:pb-0">
                        {activeTab === 'calendar' && (
                            <CalendarView 
                                lessons={lessons} 
                                students={students} 
                                onSaveLesson={(l) => updateStateAndSync('lessons', 'save', l)} 
                                onDeleteLesson={(id) => updateStateAndSync('lessons', 'delete', id)}
                                getWeekDays={getWeekDays}
                            />
                        )}
                        {activeTab === 'students' && (
                            <StudentsView 
                                students={students} 
                                onSaveStudent={(s) => updateStateAndSync('students', 'save', s)}
                                onDeleteStudent={(id) => updateStateAndSync('students', 'delete', id)}
                            />
                        )}
                    </main>
                </div>
            );
        };

        const CalendarView = ({ lessons, students, onSaveLesson, onDeleteLesson, getWeekDays }) => {
            const [baseDate, setBaseDate] = useState(new Date().toISOString().split('T')[0]);
            const weekDays = useMemo(() => getWeekDays(baseDate), [baseDate, getWeekDays]);
            const [selectedLesson, setSelectedLesson] = useState(null);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [activeDay, setActiveDay] = useState(null);

            const exportPDF = (elementId, orientation = 'portrait', fileName = 'takvim.pdf') => {
                const element = document.getElementById(elementId);
                const opt = { margin: 5, filename: fileName, image: { type: 'jpeg', quality: 0.98 },
                              html2canvas: { scale: 2, useCORS: true, backgroundColor: '#020617' },
                              jsPDF: { unit: 'mm', format: 'a4', orientation: orientation } };
                html2pdf().set(opt).from(element).save();
            };

            return (
                <div className="p-4 md:p-8">
                    <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 no-print">
                        <div>
                            <h1 className="text-3xl font-black text-white italic tracking-tighter">Haftalƒ±k Takvim</h1>
                            <p className="text-slate-500 text-xs font-bold uppercase tracking-widest mt-1 italic">Ders Programƒ± & Bulut Senkronizasyon</p>
                        </div>
                        <div className="flex items-center gap-3">
                             <div className="flex bg-slate-900 border border-slate-800 rounded-xl p-1 items-center">
                                <button onClick={() => {
                                    const d = new Date(baseDate); d.setDate(d.getDate() - 7);
                                    setBaseDate(d.toISOString().split('T')[0]);
                                }} className="p-2 hover:bg-slate-800 rounded-lg text-slate-400"><i className="lucide-chevron-left w-5 h-5"></i></button>
                                <input type="date" className="bg-transparent px-2 text-sm font-bold text-white focus:outline-none" value={baseDate} onChange={(e) => setBaseDate(e.target.value)} />
                                <button onClick={() => {
                                    const d = new Date(baseDate); d.setDate(d.getDate() + 7);
                                    setBaseDate(d.toISOString().split('T')[0]);
                                }} className="p-2 hover:bg-slate-800 rounded-lg text-slate-400"><i className="lucide-chevron-right w-5 h-5"></i></button>
                            </div>
                            <button onClick={() => exportPDF('calendar-render', 'landscape', 'Haftalik_Program.pdf')} className="bg-slate-800 hover:bg-slate-700 text-white px-4 py-2.5 rounded-xl font-bold text-xs flex items-center gap-2 border border-slate-700 transition uppercase tracking-tighter">
                                <i className="lucide-printer w-4 h-4 text-blue-400"></i> YAZDIR
                            </button>
                        </div>
                    </div>

                    <div id="calendar-render" className="calendar-grid">
                        {weekDays.map(day => {
                            const dayLessons = lessons.filter(l => l.date === day).sort((a,b) => a.time.localeCompare(b.time));
                            const isToday = day === new Date().toISOString().split('T')[0];
                            return (
                                <div key={day} className={`flex flex-col min-h-[500px] rounded-3xl border transition-all ${isToday ? 'bg-blue-600/[0.03] border-blue-500/30 ring-1 ring-blue-500/10' : 'bg-slate-900/40 border-slate-800/60'}`}>
                                    <div className={`p-4 text-center border-b border-slate-800/50 ${isToday ? 'bg-blue-600/5' : ''}`}>
                                        <div className={`text-[10px] uppercase font-black tracking-widest ${isToday ? 'text-blue-400' : 'text-slate-500'}`}>
                                            {new Date(day).toLocaleDateString('tr-TR', { weekday: 'long' })}
                                        </div>
                                        <div className={`text-2xl font-black mt-1 ${isToday ? 'text-blue-500' : 'text-slate-200'}`}>
                                            {new Date(day).getDate()}
                                        </div>
                                    </div>
                                    <div className="flex-1 p-2 space-y-2 overflow-y-auto custom-scrollbar">
                                        {dayLessons.map(lesson => {
                                            const student = students.find(s => s.id === lesson.studentId);
                                            return (
                                                <div key={lesson.id} onClick={() => { setSelectedLesson(lesson); setIsModalOpen(true); }} className={`p-3 rounded-2xl cursor-pointer transition-all hover:translate-y-[-2px] border border-transparent hover:border-white/10 ${lesson.attendance === 'geldi' ? 'lesson-attended' : lesson.attendance === 'gelmedi' ? 'lesson-absent' : 'lesson-pending'}`}>
                                                    <div className="flex justify-between items-start mb-1">
                                                        <span className="text-[10px] font-black text-blue-400 bg-blue-400/10 px-1.5 py-0.5 rounded">{lesson.time}</span>
                                                        <span>{lesson.emotion}</span>
                                                    </div>
                                                    <div className="text-xs font-black text-slate-100 truncate">{student?.name || 'Belirsiz'}</div>
                                                    <div className="text-[9px] text-slate-500 font-bold uppercase truncate">{Array.isArray(lesson.branches) ? lesson.branches.join(', ') : lesson.branch}</div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                    <div className="p-2 no-print">
                                        <button onClick={() => { setActiveDay(day); setSelectedLesson(null); setIsModalOpen(true); }} className="w-full py-3 rounded-2xl bg-slate-800/40 hover:bg-slate-800 text-slate-500 hover:text-white transition-all flex items-center justify-center gap-2 text-[10px] font-black uppercase border border-dashed border-slate-700">
                                            <i className="lucide-plus w-3 h-3"></i> Ders Ekle
                                        </button>
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    {isModalOpen && (
                        <LessonModal 
                            lesson={selectedLesson} 
                            students={students} 
                            initialDate={activeDay}
                            onClose={() => setIsModalOpen(false)}
                            onSave={onSaveLesson}
                            onDelete={onDeleteLesson}
                        />
                    )}
                </div>
            );
        };

        const LessonModal = ({ lesson, students, initialDate, onClose, onSave, onDelete }) => {
            const [form, setForm] = useState(lesson || {
                id: Date.now().toString(),
                studentId: '',
                date: initialDate,
                time: '09:00',
                branches: [],
                notes: '',
                emotion: 'üòê',
                attendance: 'bekliyor'
            });

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-sm">
                    <div className="bg-slate-900 w-full max-w-2xl rounded-3xl p-8 border border-slate-800 shadow-2xl">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-xl font-black text-white italic">{lesson ? 'Ders Detayƒ±' : 'Yeni Ders Kaydƒ±'}</h2>
                            <button onClick={onClose} className="p-2 bg-slate-800 text-slate-400 rounded-xl hover:text-white transition"><i className="lucide-x w-5 h-5"></i></button>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div className="space-y-4">
                                <div>
                                    <label className="text-[10px] font-black text-slate-500 uppercase block mb-1.5 ml-1">√ñƒürenci Se√ßimi</label>
                                    <select className="w-full bg-slate-800 border border-slate-700 p-3.5 rounded-xl font-bold text-sm text-white" value={form.studentId} onChange={e => setForm({...form, studentId: e.target.value})}>
                                        <option value="">√ñƒürenci Se√ßin</option>
                                        {students.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}
                                    </select>
                                </div>
                                <div className="grid grid-cols-2 gap-3">
                                    <input type="date" className="bg-slate-800 border border-slate-700 p-3.5 rounded-xl font-bold text-sm text-white" value={form.date} onChange={e => setForm({...form, date: e.target.value})} />
                                    <input type="time" className="bg-slate-800 border border-slate-700 p-3.5 rounded-xl font-bold text-sm text-white" value={form.time} onChange={e => setForm({...form, time: e.target.value})} />
                                </div>
                                <textarea placeholder="Ders Notlarƒ±..." className="w-full bg-slate-800 border border-slate-700 p-3.5 rounded-xl h-24 text-sm text-white outline-none" value={form.notes} onChange={e => setForm({...form, notes: e.target.value})}></textarea>
                            </div>

                            <div className="space-y-4">
                                <div>
                                    <label className="text-[10px] font-black text-slate-500 uppercase block mb-1.5 ml-1">Uygulanan Bran≈ülar</label>
                                    <div className="flex flex-wrap gap-2 p-3 bg-slate-800/50 rounded-2xl border border-slate-800">
                                        {BRANCHES.map(b => (
                                            <button key={b} onClick={() => {
                                                const has = form.branches.includes(b);
                                                setForm({...form, branches: has ? form.branches.filter(x => x !== b) : [...form.branches, b]});
                                            }} className={`px-2.5 py-1.5 rounded-lg text-[10px] font-black transition ${form.branches.includes(b) ? 'bg-blue-600 text-white shadow-lg' : 'bg-slate-800 text-slate-500'}`}>{b.toUpperCase()}</button>
                                        ))}
                                    </div>
                                </div>
                                <div>
                                    <label className="text-[10px] font-black text-slate-500 uppercase block mb-1.5 ml-1">Katƒ±lƒ±m Durumu</label>
                                    <div className="flex bg-slate-950/40 p-1 rounded-xl border border-slate-800">
                                        {['geldi', 'gelmedi', 'bekliyor'].map(s => (
                                            <button key={s} onClick={() => setForm({...form, attendance: s})} className={`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase transition ${form.attendance === s ? 'bg-blue-600 text-white' : 'text-slate-500 hover:text-slate-300'}`}>{s}</button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="mt-8 pt-6 border-t border-slate-800 flex gap-4">
                            {lesson && <button onClick={() => { onDelete(lesson.id); onClose(); }} className="px-8 py-3.5 text-red-500 font-black text-[10px] border border-red-500/10 rounded-2xl hover:bg-red-500/10 uppercase tracking-widest">Sƒ∞L</button>}
                            <button onClick={() => { onSave(form); onClose(); }} className="flex-1 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl shadow-blue-600/30 italic">KAYDET VE SENKRONƒ∞ZE ET</button>
                        </div>
                    </div>
                </div>
            );
        };

        const StudentsView = ({ students, onSaveStudent, onDeleteStudent }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [selectedStudent, setSelectedStudent] = useState(null);

            return (
                <div className="p-4 md:p-8">
                    <div className="flex justify-between items-center mb-8">
                        <div>
                            <h1 className="text-3xl font-black text-white italic tracking-tighter">√ñƒürenciler</h1>
                            <p className="text-slate-500 text-xs font-bold uppercase tracking-widest mt-1">Sistemde {students.length} √ñƒürenci Kayƒ±tlƒ±</p>
                        </div>
                        <button onClick={() => { setSelectedStudent(null); setIsModalOpen(true); }} className="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3.5 rounded-2xl font-black text-xs flex items-center gap-2 shadow-xl shadow-blue-600/20 transition uppercase italic">
                            <i className="lucide-plus w-4 h-4"></i> Yeni √ñƒürenci
                        </button>
                    </div>

                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
                        {students.map(student => (
                            <div key={student.id} onClick={() => { setSelectedStudent(student); setIsModalOpen(true); }} className="bg-slate-900/60 border border-slate-800 p-6 rounded-3xl hover:border-blue-500/40 transition-all cursor-pointer group hover:bg-slate-900">
                                <div className="flex items-center gap-5">
                                    <div className="w-16 h-16 bg-slate-800 rounded-2xl flex items-center justify-center text-blue-500 text-2xl font-black border border-slate-700 shadow-inner group-hover:scale-110 transition-transform overflow-hidden">
                                        {student.photo ? <img src={student.photo} className="w-full h-full object-cover" /> : student.name[0]}
                                    </div>
                                    <div className="flex-1">
                                        <div className="text-base font-black text-white tracking-tight truncate">{student.name}</div>
                                        <div className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">{student.grade}. Sƒ±nƒ±f</div>
                                        <div className="text-[11px] font-black text-blue-400 mt-1.5 flex items-center gap-1.5">
                                            <i className="lucide-wallet w-3 h-3"></i> {student.unitPrice} ‚Ç∫ <span className="text-[8px] opacity-40">/ DERS</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {isModalOpen && (
                        <StudentModal 
                            student={selectedStudent} 
                            onClose={() => setIsModalOpen(false)} 
                            onSave={onSaveStudent} 
                            onDelete={onDeleteStudent} 
                        />
                    )}
                </div>
            );
        };

        const StudentModal = ({ student, onClose, onSave, onDelete }) => {
            const [form, setForm] = useState(student || {
                id: Date.now().toString(),
                name: '',
                grade: 1,
                unitPrice: '',
                photo: '',
                notes: ''
            });

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/90 backdrop-blur-sm">
                    <div className="bg-slate-900 w-full max-w-lg rounded-3xl p-8 border border-slate-800 shadow-2xl">
                        <div className="flex justify-between items-center mb-8">
                            <h2 className="text-xl font-black text-white italic">{student ? '√ñƒürenci Bilgilerini G√ºncelle' : 'Yeni √ñƒürenci Kaydƒ±'}</h2>
                            <button onClick={onClose} className="p-2 bg-slate-800 text-slate-400 rounded-xl hover:text-white transition"><i className="lucide-x w-5 h-5"></i></button>
                        </div>
                        
                        <div className="space-y-6">
                            <div className="flex flex-col items-center mb-4">
                                <div className="w-24 h-24 bg-slate-800 rounded-3xl flex items-center justify-center border-2 border-slate-700 overflow-hidden mb-4 shadow-xl">
                                    {form.photo ? <img src={form.photo} className="w-full h-full object-cover" /> : <i className="lucide-user w-8 h-8 opacity-20"></i>}
                                </div>
                                <input type="file" className="hidden" id="photo-up" accept="image/*" onChange={(e) => {
                                    const file = e.target.files[0];
                                    if(file) {
                                        const reader = new FileReader();
                                        reader.onload = (ev) => setForm({...form, photo: ev.target.result});
                                        reader.readAsDataURL(file);
                                    }
                                }} />
                                <label htmlFor="photo-up" className="px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-[10px] font-black text-blue-500 uppercase cursor-pointer hover:bg-slate-700 transition tracking-widest">FOTOƒûRAF SE√á</label>
                            </div>

                            <div>
                                <label className="text-[10px] font-black text-slate-500 uppercase block mb-1.5 ml-1 tracking-widest">√ñƒürenci Tam Adƒ±</label>
                                <input type="text" className="w-full bg-slate-800 border border-slate-700 p-4 rounded-xl font-bold text-sm text-white focus:border-blue-500 outline-none transition" value={form.name} onChange={e => setForm({...form, name: e.target.value})} placeholder="Ad Soyad" />
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-[10px] font-black text-slate-500 uppercase block mb-1.5 ml-1 tracking-widest">Sƒ±nƒ±f D√ºzeyi</label>
                                    <select className="w-full bg-slate-800 border border-slate-700 p-4 rounded-xl font-bold text-sm text-white" value={form.grade} onChange={e => setForm({...form, grade: e.target.value})}>
                                        {GRADES.map(g => <option key={g} value={g}>{g}. Sƒ±nƒ±f</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-[10px] font-black text-slate-500 uppercase block mb-1.5 ml-1 tracking-widest">Ders √úcreti (‚Ç∫)</label>
                                    <input type="number" className="w-full bg-slate-800 border border-slate-700 p-4 rounded-xl font-bold text-sm text-white" value={form.unitPrice} onChange={e => setForm({...form, unitPrice: e.target.value})} />
                                </div>
                            </div>
                        </div>

                        <div className="mt-10 flex gap-3">
                            {student && <button onClick={() => { onDelete(student.id); onClose(); }} className="px-8 py-4 text-red-500 font-black text-[10px] border border-red-500/10 rounded-2xl hover:bg-red-500/10 uppercase tracking-widest">Sƒ∞L</button>}
                            <button onClick={() => { onSave(form); onClose(); }} className="flex-1 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl shadow-blue-600/20 italic">Bƒ∞LGƒ∞LERƒ∞ KAYDET</button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
